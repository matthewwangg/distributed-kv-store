syntax = "proto3";

package node;

option go_package = "proto/node;node";

service Node {
  rpc Join(JoinRequest) returns (JoinResponse);
  rpc NotifyRebuild(RebuildRequest) returns (RebuildResponse);
}

message JoinRequest {
  string id = 1;
  string addr = 2;
}

message JoinResponse {
  repeated Peer peers = 1;
}

message RebuildRequest {
  string id = 1;
  string addr = 2;
  string reason = 3;
}

message RebuildResponse {
  bool success = 1;
}

message Peer {
  string id = 1;
  string addr = 2;
}